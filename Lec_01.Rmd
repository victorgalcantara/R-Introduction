---
title: "Introdução ao R"
subtitle: ""
author: "Victor G Alcantara"
institute: "USP"
date: "14/08/2022 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: ["rladies", "rladies-fonts"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
# names(xaringan:::list_css())
options(htmltools.dir.version = FALSE)
# 0. Packages and Setup ======================================================
library(pacman)
p_load("tidyverse",   # Manage and tidy data
       "rio",         # R Input Output
       "janitor",     # for tables
       "psych",       # descriptive stats
       "sjPlot","vcd",# to save crosstable with stats
       "openxlsx",     # to save multiple dataset in a single workbook in Excel
       "plotly"       # for interactive graphs
)

# Set working directory
wd <- "G:/Meu Drive/trabJuventudes_UFSCAR/DADOS"
setwd(wd)

# Remove scientific notation
options(scipen = 999)

# 1. Opening the data ============================================================
# Wrinting main data in objects

load("dataset.RDS")
d = mydata #%>% filter(grupo %in% c("Empreendimento","Misto"))

# Auxiliary objects
itens_motivo <- c(
  "Necessidade de renda/emprego","Complementar renda",
  "Desejo de ficar rico","Desejo de ganhar dinheiro",
  "Independência de chefe/patrão","Flexibilidade de horário",
  "Alternativa a um trabalho ruim/precário",
  "Engajamento social e/ou político",
  "Possibilidade de realização artística ou de expressão cultural",
  "Relações comunitárias e/ou de amizade",
  "Desenvolvimento pessoal","Desenvolvimento profissional",
  "Trabalhar na área de minha formação",
  "Trabalhar com o que gosto","Outros"
)

# Graphs colors
textcol <- "grey14"
labcol  <- "grey40"
barscol <- "steelblue"
two_barscol <- c("#66b6d2","#0f3c4c")
three_barscol <- c("#66b6d2","#276175","#031D25")

# General sets of graphs
set_theme <- theme(
  legend.position="bottom",legend.title=element_blank(),
  legend.text = element_text(colour=textcol),  
  axis.text.y=element_text(colour=textcol,size = 11),
  axis.text.x=element_text(colour=textcol,size = 11),
  axis.ticks=element_line(size=0.4),
  axis.text = element_text(colour=textcol)
)
``` 

# Introdução ao R para análise de dados

<img src="Lec_01_files/Rlogo.png"
     width="100px" height="100px"
     style="position:absolute; left:200px; top:130px;">

<img src="Lec_01_files/RStudio-logo.png"
     width="270px" height="100px"
     style="position:absolute; right:200px; top:130px;">

<br><br><br><br><br><br>
--

Noções gerais: o que é e o que faz?

--

História do software: curiosidade das humanas

--

Conhecendo o ambiente de desenvolvimento (IDE): RStudio

--

---
## Noções gerais

```{r echo=FALSE}
#### v153. Utilisa serviços/equip publicos? ----
# Part 1: v153 Yes/No
t = d %>% mutate(.,v153 = case_when(v153==1 ~ "Sim",
                                    v153==2 ~ "Não")) %>% 
  tabyl(v153)

t = t %>% mutate(.,
                 pct = round(percent*100,1))

t <- t %>% 
  ggplot(aes(x=v153,y=n))+ 
  theme_bw()+
  geom_bar(stat="identity",position="dodge",fill="steelblue")+
  scale_y_continuous(limits = c(0,200),name="frequência",
                     expand = c(0.01,0))+
  scale_x_discrete(name="",
                   labels=function(x) stringr::str_wrap(x, width = 5))+
  geom_text(aes(label = n, y=n), 
            position = position_dodge(width = 1),
            vjust = -.5,cex=4,col=labcol)+
  set_theme

t <- ggplotly(t)
t
```

